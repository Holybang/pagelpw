<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LPW: ILBGSubtract Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="tutorial-utils.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.bootcdn.net/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="lpv_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 100px;">
  <td id="projectlogo" style="padding-left: 1em; text-align: center; vertical-align: middle;"><a href="index.html"><img alt="Logo" src="lpw_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em; vertical-align: bottom; padding-bottom: 5px; ">
   <!--<div id="projectname">LPW-->
   <!--</div>-->
   <div id="projectbrief">Leaper WaferScan Toolkit</div>
   <div id="projectbrief"><a href="../../cn/html/index.html">中文</a> / <a href="../../en/html/index.html">English</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_l_p_v_img_proc_lib.html">LPVImgProcLib</a></li><li class="navelem"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html">ILBGSubtract</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">ILBGSubtract Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This interface provide functionalities of background subtraction for consistent or slowly changing environment.  
 <a href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ILBGSubtract:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a372de693ad40b3f42839c8ec6ac845f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a> ()</td></tr>
<tr class="separator:a372de693ad40b3f42839c8ec6ac845f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde5871fdd13c4521f40cd8035c5e4b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#abde5871fdd13c4521f40cd8035c5e4b1">Apply</a> (<a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *img, <a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *fgMask, BOOL doUpdateBGModel)</td></tr>
<tr class="separator:abde5871fdd13c4521f40cd8035c5e4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9dcc411de1121f811e1b0966716ea2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#af9dcc411de1121f811e1b0966716ea2e">UpdateBGModel</a> (<a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *img)</td></tr>
<tr class="separator:af9dcc411de1121f811e1b0966716ea2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a3ebf67424198be278e1b93ba9db9a919"><td class="memItemLeft" align="right" valign="top"><a id="a3ebf67424198be278e1b93ba9db9a919"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#a3ebf67424198be278e1b93ba9db9a919">HistoryMaxCount</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a3ebf67424198be278e1b93ba9db9a919"><td class="mdescLeft">&#160;</td><td class="mdescRight">The max count of the history images which affect the background model. The larger number result in the smaller default learning rate and the slower the background update. \nIt should be a positive integer. By default, it's set to 500. \nChange this value will reset the background model. <br /></td></tr>
<tr class="separator:a3ebf67424198be278e1b93ba9db9a919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c02d2ec62ed763ddf16e11f72b97fac"><td class="memItemLeft" align="right" valign="top"><a id="a2c02d2ec62ed763ddf16e11f72b97fac"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#a2c02d2ec62ed763ddf16e11f72b97fac">VarianceThreshold</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a2c02d2ec62ed763ddf16e11f72b97fac"><td class="mdescLeft">&#160;</td><td class="mdescRight">The variance threshold used to determine whether the current pixel is foreground or background. If the background changes obviously, the threshold should be set higher, while the detection sensitivity decreases. \nIt should be a positive value. By default, it's set to 25. \nChange this value will reset the background model. <br /></td></tr>
<tr class="separator:a2c02d2ec62ed763ddf16e11f72b97fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a066ff3d70e5a52a68c6a0b526e514269"><td class="memItemLeft" align="right" valign="top"><a id="a066ff3d70e5a52a68c6a0b526e514269"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#a066ff3d70e5a52a68c6a0b526e514269">GenerateThreshold</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a066ff3d70e5a52a68c6a0b526e514269"><td class="mdescLeft">&#160;</td><td class="mdescRight">The generation threshold used to determine the complexity of the background model. If the foreground and the background is very different, you should use a larger threshold which result in more robust background model; otherwise if they are very similar, you should use a smaller threshold to generate a more sensitive background model. \nIt should be a positive value. By default, it's set to 3. \nChange this value will reset the background model. <br /></td></tr>
<tr class="separator:a066ff3d70e5a52a68c6a0b526e514269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ebbedafd2f6a6f082fa012581a149d3"><td class="memItemLeft" align="right" valign="top"><a id="a5ebbedafd2f6a6f082fa012581a149d3"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_b_g_subtract.html#a5ebbedafd2f6a6f082fa012581a149d3">LearningRate</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a5ebbedafd2f6a6f082fa012581a149d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The learning rate is used to control how much the background model should learn from the new coming frame. \nIt's in range 0 ~ 1, bigger value means faster learning. 0 means not learning at all, 1 means completely reinitialized. By default, it's set to -1 to let the algorithm to automatically chose the rate, based on the historical data and current model. <br /></td></tr>
<tr class="separator:a5ebbedafd2f6a6f082fa012581a149d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This interface provide functionalities of background subtraction for consistent or slowly changing environment. </p>
<p>Background subtraction is a widely-used technique for detecting moving or pop-up objects in the static scene.</p>
<p>We model the background for each pixel using the history images. Then given the present image, every pixel is compared with the background model and classified as either foreground or background. The background model should also be updated continuously on the fly, which is controllable by a proper learning rate.</p>
<p>To use this interface, you should create a <a class="el" href="class_l_p_v_img_proc_lib_1_1_l_b_g_subtract.html">LBGSubtract</a> object.</p>
<h3>Example Code </h3>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'><p> Code snippets: snippets/BackgroudSubtract.cpp </p><div class="fragment"><div class="line">ILBGSubtractPtr m_bg_sub(__uuidof(LBGSubtract));</div>
<div class="line">m_bg_sub-&gt;HistoryMaxCount = 1000;</div>
<div class="line"><a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> err = m_bg_sub-&gt;Apply(cur_img, cur_fg_mask, VARIANT_TRUE);</div>
<div class="line"><span class="keywordflow">if</span> (err != LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="comment">// subsequently processing on the foreground mask, say, count the pixels:</span></div>
<div class="line"><span class="keywordtype">int</span> fgPixelCount = 0;</div>
<div class="line">m_img_stats-&gt;CountPixel(fg_mask, NULL, 128, 255, NULL, &amp;fgPixelCount, NULL);</div>
<div class="ttc" id="anamespace_l_p_v_core_lib_html_a753df57c2ab9773ee9dff5747163ee4a"><div class="ttname"><a href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVCoreLib::LPVErrorCode</a></div><div class="ttdeci">LPVErrorCode</div><div class="ttdoc">This enumeration represents the type of a LPV function error.</div><div class="ttdef"><b>Definition:</b> LPVCore.idl:194</div></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML' title='csharp' style='display: none;'>C#</div><div class='toggleable_div label_csharp' style='display: none;'><p> Code snippets: snippets/BackgroudSubtract.cs </p><div class="fragment"><div class="line">LBGSubtract m_bg_sub = <span class="keyword">new</span> LBGSubtract();</div>
<div class="line">m_bg_sub.HistoryMaxCount = 1000;</div>
<div class="line"><a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> err = m_bg_sub.Apply(cur_img, cur_fg_mask, <span class="keyword">true</span>);</div>
<div class="line"><span class="keywordflow">if</span> (err != LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="comment">// subsequently processing on the foreground mask, say, count the pixels:</span></div>
<div class="line"><span class="keywordtype">int</span> fgPixelCount = 0;</div>
<div class="line">m_img_stats.CountPixel(fg_mask, <span class="keyword">null</span>, 128, 255, <span class="keyword">null</span>, out fgPixelCount, <span class="keyword">null</span>);</div>
</div><!-- fragment --> </div>  </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a372de693ad40b3f42839c8ec6ac845f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a372de693ad40b3f42839c8ec6ac845f4">&#9670;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the background model, it clean up all historical data. </p>

</div>
</div>
<a id="abde5871fdd13c4521f40cd8035c5e4b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abde5871fdd13c4521f40cd8035c5e4b1">&#9670;&nbsp;</a></span>Apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> Apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>fgMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>doUpdateBGModel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Apply the background model to the input image, report the foreground mask. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The input image. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fgMask</td><td><img src="color_binary.png" alt="" class="inline" title="Binary images"/> Output the foreground mask. White pixels are foreground. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">doUpdateBGModel</td><td>Whether to update the background model using the current new frame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">error</td><td>Return error code if anything is wrong. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af9dcc411de1121f811e1b0966716ea2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9dcc411de1121f811e1b0966716ea2e">&#9670;&nbsp;</a></span>UpdateBGModel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> UpdateBGModel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update the background model using the input image. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The input image. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">error</td><td>Return error code if anything is wrong. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
© 2022 <a href="http://www.hzleaper.com/">Hangzhou Leaper Tech. Ltd.</a>
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
