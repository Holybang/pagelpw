<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LPW: ILFlatField Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="tutorial-utils.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.bootcdn.net/ajax/libs/mathjax/2.7.7/MathJax.js"></script>
<link href="lpv_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 100px;">
  <td id="projectlogo" style="padding-left: 1em; text-align: center; vertical-align: middle;"><a href="index.html"><img alt="Logo" src="lpw_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em; vertical-align: bottom; padding-bottom: 5px; ">
   <!--<div id="projectname">LPW-->
   <!--</div>-->
   <div id="projectbrief">Leaper WaferScan Toolkit</div>
   <div id="projectbrief"><a href="../../cn/html/index.html">中文</a> / <a href="../../en/html/index.html">English</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_l_p_v_calib_lib.html">LPVCalibLib</a></li><li class="navelem"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html">ILFlatField</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">ILFlatField Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This interface provide functionalities of flat field calibration and correction.  
 <a href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ILFlatField:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_l_p_v_calib_lib_1_1_i_l_flat_field.png" usemap="#ILFlatField_map" alt=""/>
  <map id="ILFlatField_map" name="ILFlatField_map">
<area href="interface_l_p_v_core_lib_1_1_i_l_object.html" title="This base interface for a serializable LPV object." alt="ILObject" shape="rect" coords="0,56,71,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adb434c2170d12543d8f9530244db555e"><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#adb434c2170d12543d8f9530244db555e">IsCalibrated</a> ()</td></tr>
<tr class="separator:adb434c2170d12543d8f9530244db555e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c0b05112cf83cd62472f78963aebe3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#ad2c0b05112cf83cd62472f78963aebe3">SetDarkFrame</a> (<a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *image)</td></tr>
<tr class="separator:ad2c0b05112cf83cd62472f78963aebe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a244b90f48b149a74775c2be0d1e050"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a6a244b90f48b149a74775c2be0d1e050">Train</a> (<a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *image, <a class="el" href="interface_l_p_v_core_lib_1_1_i_l_region.html">ILRegion</a> *region)</td></tr>
<tr class="separator:a6a244b90f48b149a74775c2be0d1e050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b5ec6cb9ccb7dd76b228f215137af7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#ab3b5ec6cb9ccb7dd76b228f215137af7">FixImage</a> (<a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *image, <a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *fixedImage)</td></tr>
<tr class="separator:ab3b5ec6cb9ccb7dd76b228f215137af7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71068be4b0b4b6e13fb538c25f06e028"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a71068be4b0b4b6e13fb538c25f06e028">GetFlatField</a> (<a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *previewImage)</td></tr>
<tr class="separator:a71068be4b0b4b6e13fb538c25f06e028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interface_l_p_v_core_lib_1_1_i_l_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="interface_l_p_v_core_lib_1_1_i_l_object.html">ILObject</a></td></tr>
<tr class="memitem:a372de693ad40b3f42839c8ec6ac845f4 inherit pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_object.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a> ()</td></tr>
<tr class="separator:a372de693ad40b3f42839c8ec6ac845f4 inherit pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf9b00d47787a935a044ce74d0df887 inherit pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_object.html#aedf9b00d47787a935a044ce74d0df887">Save</a> (BSTR filename)</td></tr>
<tr class="separator:aedf9b00d47787a935a044ce74d0df887 inherit pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc33f804a59dbd9a1f824ea51862aaa2 inherit pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_object.html#acc33f804a59dbd9a1f824ea51862aaa2">Load</a> (BSTR filename)</td></tr>
<tr class="separator:acc33f804a59dbd9a1f824ea51862aaa2 inherit pub_methods_interface_l_p_v_core_lib_1_1_i_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a578080e61d50698076077b040524ba0b"><td class="memItemLeft" align="right" valign="top"><a id="a578080e61d50698076077b040524ba0b"></a>
<a class="el" href="namespace_l_p_v_core_lib.html#a0205db5ad70eff44ebd76708a72459e0">LPVImageFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a578080e61d50698076077b040524ba0b">ColorMode</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a578080e61d50698076077b040524ba0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The mode of the flat field tool, either handling grayscale or color image. <br /></td></tr>
<tr class="separator:a578080e61d50698076077b040524ba0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56977ab6b6fd870be6ab255e53aac582"><td class="memItemLeft" align="right" valign="top"><a id="a56977ab6b6fd870be6ab255e53aac582"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a56977ab6b6fd870be6ab255e53aac582">FromGray</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a56977ab6b6fd870be6ab255e53aac582"><td class="mdescLeft">&#160;</td><td class="mdescRight">The raw sourcing grayscale value before flat field correction, for grayscale mode. <br /></td></tr>
<tr class="separator:a56977ab6b6fd870be6ab255e53aac582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69848b2c0bac888bddb61e61aa183955"><td class="memItemLeft" align="right" valign="top"><a id="a69848b2c0bac888bddb61e61aa183955"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a69848b2c0bac888bddb61e61aa183955">ToGray</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a69848b2c0bac888bddb61e61aa183955"><td class="mdescLeft">&#160;</td><td class="mdescRight">The expected targeting grayscale value after flat field correction, for grayscale mode. <br /></td></tr>
<tr class="separator:a69848b2c0bac888bddb61e61aa183955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebef45da9d7e82149a89578802d83905"><td class="memItemLeft" align="right" valign="top"><a id="aebef45da9d7e82149a89578802d83905"></a>
<a class="el" href="struct_l_p_v_core_lib_1_1_l_color.html">LColor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#aebef45da9d7e82149a89578802d83905">FromColor</a><code> [get, set]</code></td></tr>
<tr class="memdesc:aebef45da9d7e82149a89578802d83905"><td class="mdescLeft">&#160;</td><td class="mdescRight">The raw sourcing color before flat field correction, for color mode. <br /></td></tr>
<tr class="separator:aebef45da9d7e82149a89578802d83905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5720323a52f32cec2d35c7d7c74952"><td class="memItemLeft" align="right" valign="top"><a id="aab5720323a52f32cec2d35c7d7c74952"></a>
<a class="el" href="struct_l_p_v_core_lib_1_1_l_color.html">LColor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#aab5720323a52f32cec2d35c7d7c74952">ToColor</a><code> [get, set]</code></td></tr>
<tr class="memdesc:aab5720323a52f32cec2d35c7d7c74952"><td class="mdescLeft">&#160;</td><td class="mdescRight">The expected targeting color after flat field correction, for color mode. <br /></td></tr>
<tr class="separator:aab5720323a52f32cec2d35c7d7c74952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585dc9985644d65192009ac9022ed3c0"><td class="memItemLeft" align="right" valign="top"><a id="a585dc9985644d65192009ac9022ed3c0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a585dc9985644d65192009ac9022ed3c0">Tolerance</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a585dc9985644d65192009ac9022ed3c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The tolerance range of the color or grayscale value in image, in 1 ~ 50. By default, it's 10. 0 is the special value to make use of the entire image as foreground. It helps to build the color range of the foreground object of interest. <br /></td></tr>
<tr class="separator:a585dc9985644d65192009ac9022ed3c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe1c67e11510263d518d0ef583c0c96"><td class="memItemLeft" align="right" valign="top"><a id="acbe1c67e11510263d518d0ef583c0c96"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#acbe1c67e11510263d518d0ef583c0c96">KernelWidth</a><code> [get, set]</code></td></tr>
<tr class="memdesc:acbe1c67e11510263d518d0ef583c0c96"><td class="mdescLeft">&#160;</td><td class="mdescRight">The kernel size, it affects the updating range of the foreground and flat field during training and the smoothness of the result flat field. It should be an odd number, say, 3, 5, 7, etc. By default, it's 121. <br /></td></tr>
<tr class="separator:acbe1c67e11510263d518d0ef583c0c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba3c49545ce4e4b13d63242f080cf47"><td class="memItemLeft" align="right" valign="top"><a id="adba3c49545ce4e4b13d63242f080cf47"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#adba3c49545ce4e4b13d63242f080cf47">UpdateRate</a><code> [get, set]</code></td></tr>
<tr class="memdesc:adba3c49545ce4e4b13d63242f080cf47"><td class="mdescLeft">&#160;</td><td class="mdescRight">The learning rate to control how the flat field image is updated, in 0 ~ 1. The larger value means the higher weights in updating for the new input image. It is recommended to use a higher updating rate in the first some iterations, then lower it in the laters. By default, it's 0, indicates the update rate is calculated on the fly based on the ratio of known foreground pixels. <br /></td></tr>
<tr class="separator:adba3c49545ce4e4b13d63242f080cf47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This interface provide functionalities of flat field calibration and correction. </p>
<p>Flat field correction is used to compensate for the non-uniformity characteristics of the camera and lens combination such as:</p><ul>
<li>the inhomogeneous illumination intensities in the field-of-view</li>
<li>the differences of light sensitivity between the pixels on the camera sensor</li>
<li>the shading of lens, which is a generic form of lens vignetting, where light falloff can be asymmetrical and can have a color cast</li>
</ul>
<p>The standard way to do flat field calibration is with a uniform target covering the whole field-of-view, usually a gray or white card. You may then obtain the flat field image:</p><ol type="1">
<li>Place the target to cover the whole view</li>
<li>Adjust the lens aperture and the illumination intensity to obtain the brightest possible image providing that no pixels are saturated.</li>
<li>Acquire several frames and <a class="el" href="interface_l_p_v_img_proc_lib_1_1_i_l_image_arithm.html#acfe14eacf1d5bc838d521a82f1ce0b6a">blend</a> them into one denoised image then pass it to the <a class="el" href="class_l_p_v_calib_lib_1_1_l_flat_field.html">LFlatField</a> object for <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a6a244b90f48b149a74775c2be0d1e050">training</a>.</li>
</ol>
<p>Another optional way is to use the target object in the actual inspection. The advantage of this method is that the real light reflection on the target object's surface is collected, making the correction more suitable for the material. To obtain the flat field image:</p><ol type="1">
<li>Adjust the lens aperture and the illumination intensity to obtain the brightest possible image providing that no pixels are saturated and the inspected components are clear.</li>
<li>Configure <a class="el" href="class_l_p_v_calib_lib_1_1_l_flat_field.html">LFlatField</a> for the raw and expected color or grayscale value, to extract the foreground pixels. You may alternatively adopt other locating tools to detect then generate the foreground regions or masks.</li>
<li>Place then capture the image of the target on any possible location in the view, make sure the whole view is almost covered. Pass those images (and their foreground regions or masks) to <a class="el" href="class_l_p_v_calib_lib_1_1_l_flat_field.html">LFlatField</a> for <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a6a244b90f48b149a74775c2be0d1e050">training</a></li>
</ol>
<p>To use this interface, you should create a <a class="el" href="class_l_p_v_calib_lib_1_1_l_flat_field.html">LFlatField</a> object.</p>
<h3>Example Code </h3>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'><p> Code snippets: snippets/FlatFieldWhiteBoard.cpp, snippets/FlatFieldSolar.cpp </p><div class="fragment"><div class="line">ILFlatFieldPtr ffc(__uuidof(LFlatField));</div>
<div class="line"><span class="comment">// with white board</span></div>
<div class="line">ffc-&gt;ColorMode = LPVImageFormat::LPVImageFormatGrayscale8;</div>
<div class="line">ffc-&gt;ToGray = 160; <span class="comment">// correct the white board to 160 gray</span></div>
<div class="line">ffc-&gt;Tolerance = 0; <span class="comment">// make use of the entire image as foreground</span></div>
<div class="line"><a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> err = ffc-&gt;SetDarkFrame(darkImg); <span class="comment">// set dark frame</span></div>
<div class="line"><span class="keywordflow">if</span> (err != LPVErrorCode::LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="line">err = ffc-&gt;Train(wbImg, NULL); <span class="comment">// train the white board image</span></div>
<div class="line"><span class="keywordflow">if</span> (err != LPVErrorCode::LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="line">ILImagePtr correctedImg(__uuidof(LImage));</div>
<div class="line">err = ffc-&gt;FixImage(rawImg, correctedImg); <span class="comment">// do flat field correction</span></div>
<div class="line"><span class="keywordflow">if</span> (err != LPVErrorCode::LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="ttc" id="anamespace_l_p_v_core_lib_html_a753df57c2ab9773ee9dff5747163ee4a"><div class="ttname"><a href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVCoreLib::LPVErrorCode</a></div><div class="ttdeci">LPVErrorCode</div><div class="ttdoc">This enumeration represents the type of a LPV function error.</div><div class="ttdef"><b>Definition:</b> LPVCore.idl:206</div></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML' title='csharp' style='display: none;'>C#</div><div class='toggleable_div label_csharp' style='display: none;'><p> Code snippets: snippets/FlatFieldWhiteBoard.cs, snippets/FlatFieldSolar.cs </p><div class="fragment"><div class="line">LFlatField ffc = <span class="keyword">new</span> LFlatField();</div>
<div class="line"><span class="comment">// with white board</span></div>
<div class="line">ffc.ColorMode = <a class="code" href="namespace_l_p_v_core_lib.html#a0205db5ad70eff44ebd76708a72459e0">LPVImageFormat</a>.LPVImageFormatGrayscale8;</div>
<div class="line">ffc.ToGray = 160; <span class="comment">// correct the white board to 160 gray</span></div>
<div class="line">ffc.Tolerance = 0; <span class="comment">// make use of the entire image as foreground</span></div>
<div class="line"><a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> err = ffc.SetDarkFrame(darkImg); <span class="comment">// set dark frame</span></div>
<div class="line"><span class="keywordflow">if</span> (err != <a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>.LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="line">err = ffc.Train(wbImg, <span class="keyword">null</span>); <span class="comment">// train the white board image</span></div>
<div class="line"><span class="keywordflow">if</span> (err != <a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>.LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="line">LImage correctedImg = <span class="keyword">new</span> LImage();</div>
<div class="line">err = ffc.FixImage(rawImg, correctedImg); <span class="comment">// do flat field correction</span></div>
<div class="line"><span class="keywordflow">if</span> (err != <a class="code" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a>.LPVNoError) <span class="keywordflow">return</span>;</div>
<div class="ttc" id="anamespace_l_p_v_core_lib_html_a0205db5ad70eff44ebd76708a72459e0"><div class="ttname"><a href="namespace_l_p_v_core_lib.html#a0205db5ad70eff44ebd76708a72459e0">LPVCoreLib::LPVImageFormat</a></div><div class="ttdeci">LPVImageFormat</div><div class="ttdoc">This enumeration represents the format of the image.</div><div class="ttdef"><b>Definition:</b> LPVCore.idl:1306</div></div>
</div><!-- fragment --> </div>  </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="adb434c2170d12543d8f9530244db555e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb434c2170d12543d8f9530244db555e">&#9670;&nbsp;</a></span>IsCalibrated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL IsCalibrated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether the flat field is well-calibrated. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">val</td><td>Return True if it's calibrated, otherwise, return False. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2c0b05112cf83cd62472f78963aebe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c0b05112cf83cd62472f78963aebe3">&#9670;&nbsp;</a></span>SetDarkFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> SetDarkFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the dark frame, which represents the dark current of the sensor and should be eliminated from the corrected image. To obtain the dark frame, you may cover the lens with a cap, acquire several images then adopt multi-frame image blending to get the denoised result. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>The input dark image, with the same color format as the flat field. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">error</td><td>Return error code if anything is wrong. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a244b90f48b149a74775c2be0d1e050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a244b90f48b149a74775c2be0d1e050">&#9670;&nbsp;</a></span>Train()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> Train </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_region.html">ILRegion</a> *&#160;</td>
          <td class="paramname"><em>region</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Train the flat field using the given image. Foreground pixels are extracted in the given image, based on the raw sourcing color or grayscale range and the tolerance, then update to the result flat field image. If <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a585dc9985644d65192009ac9022ed3c0" title="The tolerance range of the color or grayscale value in image, in 1 ~ 50. By default,...">Tolerance</a> is set to 0, then all the pixels in the input image and region is considered as foreground then contributes to the flat field. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>The input image, with the same color format as the flat field. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">region</td><td>The optional input region, to specify the possible foreground locations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">error</td><td>Return error code if anything is wrong. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#ab3b5ec6cb9ccb7dd76b228f215137af7">FixImage()</a>, <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#ad2c0b05112cf83cd62472f78963aebe3">SetDarkFrame()</a>, <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a71068be4b0b4b6e13fb538c25f06e028">GetFlatField()</a>, <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a585dc9985644d65192009ac9022ed3c0" title="The tolerance range of the color or grayscale value in image, in 1 ~ 50. By default,...">Tolerance</a> </dd></dl>

</div>
</div>
<a id="ab3b5ec6cb9ccb7dd76b228f215137af7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3b5ec6cb9ccb7dd76b228f215137af7">&#9670;&nbsp;</a></span>FixImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_l_p_v_core_lib.html#a753df57c2ab9773ee9dff5747163ee4a">LPVErrorCode</a> FixImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>fixedImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fix the image to remove shading or lens cast or affect of inhomogeneous light.<br  />
The correction works with a calibrated flat field, if not it returns the LPVErrCalibNotCalib error. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">image</td><td>The input image, with the same color format as the flat field. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fixedImage</td><td>Output the fixed result image. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">error</td><td>Return error code if anything is wrong. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a6a244b90f48b149a74775c2be0d1e050">Train()</a>, <a class="el" href="interface_l_p_v_calib_lib_1_1_i_l_flat_field.html#a71068be4b0b4b6e13fb538c25f06e028">GetFlatField()</a> </dd></dl>

</div>
</div>
<a id="a71068be4b0b4b6e13fb538c25f06e028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71068be4b0b4b6e13fb538c25f06e028">&#9670;&nbsp;</a></span>GetFlatField()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetFlatField </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_l_p_v_core_lib_1_1_i_l_image.html">ILImage</a> *&#160;</td>
          <td class="paramname"><em>previewImage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the flat field image for preview. The brighter pixels indicate the light intensity there are stronger. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">previewImage</td><td>Output the flat field image for preview. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
© 2023 <a href="http://www.hzleaper.com/">Hangzhou Leaper Tech. Ltd.</a>
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
