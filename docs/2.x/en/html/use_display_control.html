<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LPW: LDisplay Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="tutorial-utils.js"></script>
<script type="text/javascript" src="version.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="lpv_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 100px;">
  <td id="projectlogo" style="padding-left: 1em; text-align: center; vertical-align: middle;"><a href="index.html"><img alt="Logo" src="lpw_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em; vertical-align: bottom; padding-bottom: 5px;">
   <div id="projectbrief">Leaper WaferScan Toolkit</div>
   <div id="projectbrief" style="margin-top: 3px;">
    <a id="cn_btn" style="cursor: pointer; color: var(--primary-color);">中文</a> / <a id="en_btn" style="cursor: pointer; color: var(--primary-color);">English</a>
    <span id="projectnumber">2.x</span>
    </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">LDisplay Control </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md38">Add LDisplay Control to Visual Studio Projects</a><ul><li class="level2"><a href="#autotoc_md39">Approach 1: Use Toolbox</a></li>
<li class="level2"><a href="#autotoc_md40">Approach 2: Use Class Wizard (MFC)</a></li>
<li class="level2"><a href="#autotoc_md41">Approach 3: Use #import directive (C++)</a></li>
<li class="level2"><a href="#autotoc_md42">Approach 4: Add Reference (C#)</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md43">Create Display Control Programmatically</a><ul><li class="level2"><a href="#autotoc_md44">Example Code for an Application with UI</a></li>
<li class="level2"><a href="#autotoc_md45">Example Code for a Console Application</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_Z__stonewall_doc_en_t03_use_display_control"></a> <b>NOTE</b>: Draw functions and <a class="el" href="use_display_control.html">LDisplay Control</a> is now only implemented on Windows. For others (Mac / Linux), the functions and related interfaces are retained but non-functional.</p>
<p><br  />
</p>
<p><a class="el" href="interface_l_p_v_display_lib_1_1_i_l_display.html">LDisplay</a> Control is developed based on Win32 GDI interface, it's useful for display and manipulate the drawable LPW objects, such as images, regions and geometric shapes. It could be fully integrated into OEM and capital equipment machines, greatly speedup the development of the vision system.</p>
<ul>
<li>Show a big-size image, thousands of shapes and algorithms' results at the same time.</li>
<li>Use the mouse to drag and move the scene, use the wheel to zoom in or out.</li>
<li>Able to manipulate the Region object by dragging the handles.</li>
<li>Fit to the current window, or a displayed object, or the specified position and size.</li>
<li>Save the current image and screen-shot to file.</li>
<li>Add the horizontal or vertical reference lines to the scene</li>
<li>Show the position of the mouse and the corresponding pixel value</li>
</ul>
<p><em>Alternatively, you can use the <a class="el" href="use_draw_functions.html">Draw Functions</a> of individual LPW classes.</em></p>
<p><img src="t03_07_displayctrl.png" alt="" class="inline" title="LDisplay Control"/></p>
<h1><a class="anchor" id="autotoc_md38"></a>
Add LDisplay Control to Visual Studio Projects</h1>
<p>Module: <b>lpvDisplay.dll</b></p>
<p>*NOTE: Please make sure your LPW libraries are registered and licensed.**</p>
<h2><a class="anchor" id="autotoc_md39"></a>
Approach 1: Use Toolbox</h2>
<p><b>Step 1</b> - In the Resource View of your application, right-click anywhere in the Toolbox window, and then select <b>Choose Items</b>.</p>
<p><img src="t03_01_rmc_choose_items.png" alt="" class="inline" title="T03 01 Rmc Choose Items"/></p>
<p><b>Step 2</b> - This dialog box shows a list of controls that can be added to the toolbox. The check box in the selected state means those items will already be present in the toolbox.</p>
<p><b>Step 3 (A)</b> - Select the <b>COM Components</b> tab, check the <b>LDispaly class</b> from the available list, and then click <b>OK</b>. The selected controls will now be displayed in Visual Studio toolbox.</p>
<p><img src="t03_02_choose_items_dialog.png" alt="" class="inline" title="T03 02 Choose Items Dialog"/></p>
<p><b>Step 3 (B)</b> - Alternatively, you can also add tools by navigating to the <b>lpvDisplay.dll</b> location.</p>
<p><b>Step 4</b> - Once the controls are added, you can drag the control to the designer from the Visual Studio Toolbox and start using it. The assembly reference will automatically be added in the reference manager.</p>
<p><img src="t03_03_display_control_in_design.png" alt="" class="inline" title="T03 03 Display Control In Design"/></p>
<h2><a class="anchor" id="autotoc_md40"></a>
Approach 2: Use Class Wizard (MFC)</h2>
<p><b>Step 1</b> - In the Solution Explorer of your application, right-click your project, and then select <b>Class Wizard</b>.</p>
<p><img src="t03_04_rmc_class_wizard.png" alt="" class="inline" title="T03 04 Rmc Class Wizard"/></p>
<p><b>Step 2</b> - Select and open the <b>Add Class From ActiveX Control Wizard</b>.</p>
<p><img src="t03_05_add_class_from_activex_control.png" alt="" class="inline" title="T03 05 Add Class From ActiveX Control"/></p>
<p><b>Step 3</b> - Select to add class from <b>File</b>, then navigate to the <b>lpvDisplay.dll</b> location.</p>
<p><b>Step 4</b> - Select <b>ILDisplay</b> interface then click Add to generate the corresponding wrapper class.</p>
<p><img src="t03_06_add_interface_wrapper_class.png" alt="" class="inline" title="T03 06 Add Interface Wrapper Class"/></p>
<p><b>Step 5</b> - Click <b>Finish</b> then <b>OK</b>. CLDisplay.h and CLDisplay.cpp file is generated and added to your project.</p>
<p><b>Step 6</b> - You can now use the display control in your application. See more detailed usage in <b>demo/mfcdemo/MFCDisplay</b>.</p>
<p>Alternatively, you can also use the out-of-box wrapper class under demo/mfcdemo/Wrappers, by including <b>LPVDisplay.h</b> and <b>CLDisplay.cpp</b> to your project.</p>
<h2><a class="anchor" id="autotoc_md41"></a>
Approach 3: Use #import directive (C++)</h2>
<p>The preprocessor directive is used to incorporate information from a type library. For more detailed information, please refer to <a href="https://docs.microsoft.com/en-us/cpp/preprocessor/hash-import-directive-cpp">https://docs.microsoft.com/en-us/cpp/preprocessor/hash-import-directive-cpp</a> .</p>
<p>Add the following lines:</p>
<div class="fragment"><div class="line"><span class="comment">// use the uuid of the LPVDisplay library</span></div>
<div class="line"><span class="preprocessor">#import &quot;libid:5b289f4f-ebc9-4a41-bd94-07f4a4e4e5f6&quot;</span></div>
</div><!-- fragment --><p>-or-</p>
<div class="fragment"><div class="line"><span class="comment">// use the file path of the LPVDisplay library</span></div>
<div class="line"><span class="preprocessor">#import &quot;Y:\\bin\\x86\\lpvDisplay.dll&quot;</span></div>
</div><!-- fragment --><p>-or-</p>
<div class="fragment"><div class="line"><span class="comment">// use the progid of the LDisplay class</span></div>
<div class="line"><span class="preprocessor">#import &quot;progid:LPV.LDisplay&quot;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md42"></a>
Approach 4: Add Reference (C#)</h2>
<p>You could add the LDisplay library to the C# project as all other $projectname libraries:</p><ol type="1">
<li>RMC your C# project, click "Add Reference"</li>
<li>Under COM -&gt; Type Libraries panel, search and find <a class="el" href="namespace_l_p_v_display_lib.html" title="LPV Display Library, provide ui controls for display images, regions, geometric shapes and other algo...">LPVDisplayLib</a>, then click OK to add reference (and Interop) to them in your project.</li>
<li>In your code, add the line <code>using <a class="el" href="namespace_l_p_v_display_lib.html" title="LPV Display Library, provide ui controls for display images, regions, geometric shapes and other algo...">LPVDisplayLib</a>;</code>.</li>
</ol>
<h1><a class="anchor" id="autotoc_md43"></a>
Create Display Control Programmatically</h1>
<h2><a class="anchor" id="autotoc_md44"></a>
Example Code for an Application with UI</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line"><span class="keywordtype">void</span> QtDisplay::OnBnClickedBtnDisplayDlg()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// create a prompt display dialog</span></div>
<div class="line">    QDialog displayDlg(<span class="keyword">this</span>);</div>
<div class="line">    QAxWidget displayWgt(&amp;displayDlg);</div>
<div class="line">    displayWgt.setControl(QStringLiteral(<span class="stringliteral">&quot;LPV.LDisplay&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    QHBoxLayout* l = <span class="keyword">new</span> QHBoxLayout(&amp;displayDlg);</div>
<div class="line">    l-&gt;addWidget(&amp;displayWgt);</div>
<div class="line">    l-&gt;setMargin(0);</div>
<div class="line">    displayDlg.setLayout(l);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// show it</span></div>
<div class="line">    displayDlg.resize(QSize(400, 300));</div>
<div class="line">    displayDlg.exec();</div>
<div class="line">}</div>
</div><!-- fragment --> </div>  <div class='newInnerHTML' title='csharp' style='display: none;'>C#</div><div class='toggleable_div label_csharp' style='display: none;'> <div class="fragment"><div class="line"><span class="keyword">namespace </span>CSharpDisplay</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">partial class </span>CSharpDisplay : Form</div>
<div class="line">    {</div>
</div><!-- fragment --><div class="fragment"><div class="line">        <span class="keyword">private</span> <span class="keywordtype">void</span> btnDisplayDlg_Click(<span class="keywordtype">object</span> sender, EventArgs e)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// create a prompt display dialog</span></div>
<div class="line">            Form prompt = <span class="keyword">new</span> Form();</div>
<div class="line">            </div>
<div class="line">            <span class="comment">// create a display control, add it to the dialog</span></div>
<div class="line">            AxLDisplay displayCtrlInDlg = <span class="keyword">new</span> AxLDisplay();</div>
<div class="line">            displayCtrlInDlg.Dock = System.Windows.Forms.DockStyle.Fill;</div>
<div class="line">            prompt.Controls.Add(displayCtrlInDlg);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// resize the dialog and show it</span></div>
<div class="line">            prompt.Width = 600;</div>
<div class="line">            prompt.Height = 400;</div>
<div class="line">            prompt.Text = <span class="stringliteral">&quot;Display Dialog&quot;</span>;</div>
<div class="line">            prompt.ShowDialog();</div>
<div class="line">        }</div>
</div><!-- fragment --><div class="fragment"><div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div>  <div class='newInnerHTML' title='com' style='display: none;'>COM</div><div class='toggleable_div label_com' style='display: none;'> <div class="fragment"><div class="line"><span class="keyword">class </span>CDisplayDialog : <span class="keyword">public</span> CDialog</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">explicit</span> CDisplayDialog(UINT nIDTemplate, CWnd* pParentWnd = NULL) :</div>
<div class="line">        CDialog(nIDTemplate, pParentWnd) {}</div>
<div class="line"> </div>
<div class="line">    CLDisplay displayCtrl;</div>
<div class="line">    <span class="keyword">virtual</span> BOOL OnInitDialog()</div>
<div class="line">    {</div>
<div class="line">        CDialog::OnInitDialog();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// get the dialog&#39;s size and position</span></div>
<div class="line">        RECT r;</div>
<div class="line">        GetClientRect(&amp;r);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// create a display control, add it to the dialog</span></div>
<div class="line">        displayCtrl.Create(L<span class="stringliteral">&quot;Display Control&quot;</span>,</div>
<div class="line">            WS_CHILD | WS_VISIBLE,</div>
<div class="line">            r, <span class="keyword">this</span>, 0);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> TRUE;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> CMFCDisplayDlg::OnBnClickedBtnDisplayDlg()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// create a prompt display dialog, see CDisplayDialog::OnInitDialog for implementation</span></div>
<div class="line">    CDisplayDialog displayDlg(IDD_DISPLAY_DLG, <span class="keyword">this</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// show it</span></div>
<div class="line">    displayDlg.DoModal();</div>
<div class="line">}</div>
</div><!-- fragment --> </div> <h2><a class="anchor" id="autotoc_md45"></a>
Example Code for a Console Application</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'><div class="fragment"><div class="line">ILImagePtr resultImg = LImage::Create();</div>
<div class="line"><span class="comment">// show result in the display control, close the window to continue</span></div>
<div class="line">ILDisplayPtr displayCtrl(__uuidof(LDisplay));</div>
<div class="line">displayCtrl-&gt;SetImage(LObjectToDispatch(*resultImg));</div>
<div class="line">displayCtrl-&gt;ShowDialog(L<span class="stringliteral">&quot;Window Title&quot;</span>, 0, 0, 0, 0); <span class="comment">// full screen</span></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML' title='csharp' style='display: none;'>C#</div><div class='toggleable_div label_csharp' style='display: none;'><div class="fragment"><div class="line">LImagePtr resultImg = <span class="keyword">new</span> LImage();</div>
<div class="line"><span class="comment">// show result in the display control, close the window to continue</span></div>
<div class="line">LDisplay displayCtrl = <span class="keyword">new</span> LDisplay();</div>
<div class="line">displayCtrl.SetImage(resultImg);</div>
<div class="line">displayCtrl.ShowDialog(<span class="stringliteral">&quot;Window Title&quot;</span>); <span class="comment">// full screen</span></div>
</div><!-- fragment --> </div>  <div class='newInnerHTML' title='com' style='display: none;'>COM</div><div class='toggleable_div label_com' style='display: none;'><div class="fragment"><div class="line">ILImagePtr resultImg(__uuidof(LImage));</div>
<div class="line"><span class="comment">// show result in the display control, close the window to continue</span></div>
<div class="line">ILDisplayPtr displayCtrl(__uuidof(LDisplay));</div>
<div class="line">displayCtrl-&gt;SetImage(resultImg);</div>
<div class="line">displayCtrl-&gt;ShowDialog(L<span class="stringliteral">&quot;Window Title&quot;</span>, 0, 0, 0, 0); <span class="comment">// full screen</span></div>
</div><!-- fragment --> </div>  </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
© 2024 <a href="http://www.hzleaper.com/">Hangzhou Leaper Tech. Ltd.</a>
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
var cn_btn = document.getElementById("cn_btn");
cn_btn.addEventListener("click", function(){window.location.href = window.location.href.replace("/en/", "/cn/");});
var en_btn = document.getElementById("en_btn");
en_btn.addEventListener("click", function(){window.location.href = window.location.href.replace("/cn/", "/en/");});
//]]>
</script>
</body>
</html>
